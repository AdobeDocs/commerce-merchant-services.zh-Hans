---
title: 筛选产品
description: 定义包括或排除要用作推荐的产品的条件。
exl-id: baab28ff-b529-4cbc-adb7-4fa225e87d4a
source-git-commit: 78f226465b9d84707612596a5aa4622aa7869ee1
workflow-type: tm+mt
source-wordcount: '698'
ht-degree: 0%

---

# 筛选产品

Adobe Commerce会自动将不可配置的默认过滤器应用于推荐单位。 如果您将多个推荐单元部署到页面，则Adobe Commerce会过滤掉这些单元中重复的所有产品。 仅使用对重复产品的第一次引用，以便为推荐其他产品留出空间。 Adobe Commerce还会过滤掉任何之前购买的产品和购物车中的产品。

当您 [创建](create.md) 推荐单元，您可以定义过滤器来控制哪些产品可以显示在推荐中。 这些过滤器基于您定义的一组包含或排除条件。 只有符合所有包含条件的产品才会出现在推荐中。 不建议使用符合任何排除条件的产品。

您可以通过选择每个过滤器页面上的切换来配置多个过滤器，并仅启用所需的过滤器。 这允许您创建过滤器草稿以供将来使用。 每个选项卡上会显示已启用的筛选器的数量。

## 条件

条件可以是静态或动态。

- 静态条件使用现有的产品属性来确定哪些产品可以显示在设备中。 例如，您可以指定只有价格超过$25的库存产品才会出现在单位中。 静态条件适用于所有页面类型。

- 购物者的当前上下文（例如当前查看的类别或产品）的动态条件键。 例如，在创建要在产品详细信息页面上部署的产品推荐时，您可以创建一个条件，以仅推荐在当前查看的产品相对价格范围内的产品。 动态条件适用于除主页之外的每种页面类型，以及通过Page Builder放置了推荐的页面。

### 逻辑运算符

逻辑运算符 `AND` 和 `OR` 用于连接多个条件。 如果同时使用包含和排除过滤器，则会首先评估包含以确定所有可能推荐的产品，然后从列表中删除匹配任何排除过滤器的产品。

- `AND`  — 连接两个包含过滤条件
- `OR`  — 连接两个排除筛选条件

>[!NOTE]
>
> “包含”和“排除”过滤器取代了版本3.2.2及更高版本中的旧版类别排除 `magento/product-recommendations` 模块。 请参阅 [发行说明](release-notes.md) 了解有关Adobe Commerce版本的更多信息。

## 筛选器的类型 {#filtertypes}

![筛选器](assets/rec-conditions.png)

### 类别

基于产品类别的过滤器使用直接类别分配及其子类别。 例如，启用类别的排除条件 `Gear` 不包括分配到的产品 `Gear` 及其所有子类别(例如 `Gear/Bags` 或 `Gear/Fitness Equipment`. 对于B2B商家，类别过滤器会遵守任何 [客户特定的产品类别](https://experienceleague.adobe.com/docs/commerce-admin/catalog/categories/category-permissions.html) 您已配置。

在将推荐部署到页面类型时，Adobe Commerce建议您使用以下类别过滤器配置：

| 页面 | 筛选条件 |
|---|---|
| 主页 | 不要筛选产品。 |
| 类别 | 筛选特定类别中的产品。 |
| 产品详细信息 | 筛选相同类别中的产品。 |
| 购物车 | 筛选购物车中产品的类别。 |
| 订单确认 | 筛选已购买产品的类别。 |

### 产品

产品过滤器可指定哪些特定产品符合条件或不符合条件，以便显示在推荐中。 您无法单独选择已禁用或不可见的产品，因为这些产品永远不会显示在推荐中。

### 类型

基于产品类型的筛选器包括或排除特定类型的所有产品。 支持的类型包括 _简单_， _可配置_， _虚拟_， _可下载_，或 _礼品卡_. _捆绑_ 和 _已分组_ 尚不支持产品。

### 可见性

根据可见性筛选产品，例如： _目录_， _搜索_，或同时使用两者。

### 价格

基于产品价格的过滤器使用最终价格来执行比较。 最终价格包括匿名购物者可以享受的任何折扣或特价。 就B2B商家而言，所显示的价格反映 [客户特定的组定价](https://experienceleague.adobe.com/docs/commerce-admin/catalog/products/pricing/pricing-advanced.html) 您已配置。

### 库存状态

以下排除过滤器可用于根据库存状态筛选出产品：

- 缺货 — （仅排除）不包括缺货产品。
- 库存低 — （仅排除）不包括库存低的产品。 低库存状态基于 _仅X左侧阈值_ 中的值 [清单配置](https://experienceleague.adobe.com/docs/commerce-admin/config/catalog/inventory.html).
